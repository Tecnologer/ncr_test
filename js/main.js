var time1 = new Date();
// var input = "829\n71, 48, 21, 100, 1, 19\n113, 35, 3, 39, 15\n13, 28, 3, 3, 41\n430, 70, 14, 116, 17\n51, 76, 35, 239, 124, 4, 25\n829\n1, 1, 15, 36, 244, 27, 49, 635, 1354\n4, 51, 124, 239, 25, 35, 76\n51, 25, 76, 239, 4, 124, 35\n1617, 16, 52, 12, 139, 451, 1217, 5810\n171, 16, 16, 8, 71, 404, 149, 403\n145, 59, 426, 6, 305, 1992, 1551, 14\n13, 1, 68, 2, 35\n430, 116, 70, 17, 14\n116, 14, 70, 17, 430\n171, 403, 149, 404, 71, 8, 16, 16\n4, 35, 25, 239, 124, 51, 76\n216, 185, 59, 25, 370, 19, 55\n103, 35, 5, 65, 19\n250, 129, 50, 34, 6, 20\n11, 82, 16, 90, 19, 205, 49\n150, 25, 151, 17, 3, 5, 108\n49, 11, 90, 205, 82, 19, 16\n14, 17, 116, 430, 70\n57, 6, 17, 213, 13, 2, 3, 32, 29\n23, 11, 189, 24, 5, 88, 3\n864, 13, 3431, 685, 242, 5877, 1831, 35, 107\n11, 16, 49, 19, 205, 82, 90\n28, 41, 13, 3, 3\n250, 50, 34, 20, 129, 6\n403, 71, 404, 16, 16, 149, 8, 171\n51, 124, 76, 35, 239, 25, 4\n205, 19, 82, 49, 11, 16, 90\n250, 20, 34, 6, 50, 129\n22, 850, 151, 44, 409, 2, 104, 1047\n151, 2, 1047, 22, 409, 850, 44, 104\n129, 7, 132, 6, 46, 10, 600, 2129, 523\n19, 42, 5, 56, 56\n76, 239, 124, 51, 25, 35, 4\n28, 13, 3, 3, 41\n19, 5, 56, 56, 42\n122, 8, 12, 19, 804, 288, 35, 1741\n842, 413, 32, 477, 47, 13, 122\n19, 185, 59, 55, 25, 370, 216\n11, 24, 23, 88, 189, 5, 3\n150, 17, 3, 5, 151, 108, 25\n1, 21, 100, 71, 48, 19\n14, 17, 430, 116, 70\n49, 19, 82, 11, 90, 205, 16\n36, 27, 635, 15, 1354, 1, 1, 49, 244\n35, 5, 103, 19, 65\n1617, 139, 451, 1217, 52, 5810, 16, 12\n,,,,\n51, 4, 239, 124, 76, 35, 25\n25, 124, 4, 76, 239, 51, 35\n145, 1551, 426, 305, 1992, 6, 14, 59\n13, 1, 2, 35, 68\n62, 341, 24, 11, 1024, 2109, 178\n70, 17, 116, 14, 430\n239, 4, 76, 25, 35, 124, 51\n15, 113, 35, 3, 39\n451, 1617, 52, 12, 139, 1217, 16, 5810\n13, 28, 3, 3, 41\n71, 19, 100, 1, 48, 21\n56, 56, 5, 19, 42\n1, 13, 2, 35, 68\n46, 129, 10, 523, 600, 2129, 132, 7, 6\n41, 28, 13, 3, 3\nA, B, C\n2, 36, 17, 68, 21, 32\n36, 27, 244, 49, 1, 1, 1354, 15, 635\n15, 35, 113, 3, 39\n122, 19, 288, 12, 1741, 8, 35, 804\n70, 116, 14, 430, 17\n2, 213, 13, 32, 57, 6, 17, 3, 29\n70, 116, 17, 430, 14\n32, 68, 36, 17, 21, 2\n216, 185, 59, 370, 19, 55, 25\n23, 3, 189, 88, 24, 11, 5\n47, 13, 842, 32, 122, 477, 413\n21, 17, 32, 68, 36, 2\n16, 19, 49, 11, 82, 205, 90\n8, 35, 804, 288, 12, 122, 1741, 19\n1551, 14, 59, 6, 1992, 305, 426, 145\n1, 71, 48, 19, 21, 100\n47, 842, 413, 477, 32, 122, 13\n370, 59, 55, 185, 216, 25, 19\n685, 864, 3431, 35, 242, 107, 1831, 5877, 13\n17, 2, 68, 21, 32, 36\n24, 178, 1024, 11, 341, 2109, 62\n13, 41, 28, 3, 3\n24, 5, 3, 189, 23, 11, 88\n59, 216, 370, 19, 185, 55, 25\n56, 56, 19, 5, 42\n430, 14, 70, 116, 17\n8, 122, 1741, 804, 288, 35, 19, 12\n113, 35, 3, 39, 15\n25, 124, 76, 239, 51, 35, 4\n205, 82, 49, 16, 11, 90, 19\n71, 100, 21, 48, 19, 1\n17, 2, 32, 36, 68, 21\n13, 3, 3, 28, 41\n1217, 52, 139, 16, 5810, 451, 1617, 12\n32, 3, 57, 13, 2, 6, 17, 29, 213\n57, 32, 3, 6, 13, 29, 213, 2, 17\n21, 19, 48, 100, 1, 71\n16, 1617, 1217, 451, 139, 12, 5810, 52\n48, 71, 100, 1, 19, 21\n19, 100, 48, 71, 1, 21\n16, 205, 82, 11, 19, 49, 90\n1992, 426, 14, 6, 59, 145, 305, 1551\n71, 1, 21, 100, 19, 48\n1, 1, 36, 15, 244, 49, 635, 1354, 27\n19, 103, 65, 35, 5\n24, 178, 341, 11, 62, 1024, 2109\n49, 1354, 244, 1, 1, 27, 15, 635, 36\n6, 46, 132, 600, 129, 523, 2129, 7, 10\n11, 1024, 178, 62, 24, 2109, 341\n189, 5, 24, 11, 3, 88, 23\n5, 42, 19, 56, 56\n28, 13, 3, 3, 41\n523, 132, 10, 6, 46, 7, 2129, 129, 600\n2109, 1024, 24, 178, 62, 11, 341\n426, 14, 59, 305, 1992, 1551, 145, 6\n19, 21, 1, 100, 48, 71\n5, 19, 56, 56, 42\n15, 113, 39, 3, 35\n48, 1, 19, 100, 71, 21\n404, 403, 149, 71, 171, 16, 16, 8\n150, 17, 3, 151, 5, 108, 25\n12, 52, 1217, 5810, 16, 451, 1617, 139\n151, 44, 22, 104, 409, 850, 1047, 2\n32, 122, 477, 13, 47, 413, 842\n32, 57, 13, 6, 17, 2, 3, 29, 213\n1, 1, 49, 1354, 27, 36, 15, 635, 244\n1024, 2109, 62, 178, 24, 11, 341\n49, 635, 36, 27, 1354, 15, 1, 1, 244\n23, 88, 11, 189, 3, 24, 5\n16, 11, 82, 90, 19, 49, 205\n32, 2, 21, 36, 68, 17\n13, 122, 413, 842, 477, 47, 32\n35, 2, 1, 13, 68\n122, 47, 477, 32, 413, 13, 842\n100, 1, 19, 71, 48, 21\n451, 52, 16, 12, 1617, 1217, 5810, 139\n19, 42, 56, 56, 5\n6, 1992, 426, 1551, 14, 59, 305, 145\n842, 13, 477, 122, 413, 32, 47\n16, 16, 403, 149, 171, 8, 404, 71\n5, 150, 17, 3, 25, 108, 151\n41, 28, 13, 3, 3\n25, 239, 51, 4, 35, 76, 124\n49, 90, 16, 19, 82, 205, 11\n2, 32, 68, 17, 21, 36\n151, 25, 3, 150, 17, 108, 5\n15, 39, 35, 3, 113\n19, 100, 48, 1, 71, 21\n3, 35, 15, 39, 113\n1217, 1617, 12, 52, 139, 16, 451, 5810\n39, 15, 3, 113, 35\n24, 3, 88, 23, 189, 11, 5\n22, 44, 151, 409, 1047, 2, 104, 850\n341, 24, 178, 2109, 1024, 62, 11\n14, 17, 430, 70, 116\n104, 2, 1047, 22, 151, 850, 44, 409\n122, 413, 47, 842, 477, 32, 13\n90, 11, 19, 16, 82, 49, 205\n2, 22, 850, 44, 409, 151, 104, 1047\n6, 50, 34, 129, 250, 20\n6, 10, 2129, 600, 523, 129, 7, 46, 132\n132, 6, 600, 10, 7, 523, 46, 129, 2129\n8, 171, 16, 16, 403, 71, 404, 149\n65, 103, 35, 5, 19\n55, 185, 59, 25, 370, 216, 19\n2, 13, 35, 68, 1\n13, 1, 2, 35, 68\n12, 52, 1217, 16, 451, 1617, 139, 5810\n100, 1, 71, 19, 48, 21\n409, 2, 104, 850, 151, 22, 44, 1047\n47, 122, 477, 32, 13, 413, 842\n21, 19, 1, 100, 48, 71\n129, 34, 250, 6, 50, 20\n244, 15, 49, 635, 1354, 36, 1, 1, 27\n82, 16, 90, 11, 49, 205, 19\n13, 35, 2, 68, 1\n2, 68, 36, 32, 21, 17\n3, 35, 15, 113, 39\n8, 149, 71, 404, 16, 16, 171, 403\n23, 24, 189, 11, 5, 88, 3\n13, 2, 35, 68, 1\n17, 29, 6, 2, 213, 57, 3, 32, 13\n24, 189, 11, 88, 3, 5, 23\n103, 35, 5, 65, 19\n88, 23, 3, 24, 11, 5, 189\n216, 370, 59, 25, 19, 55, 185\n1, 48, 100, 71, 19, 21\n32, 21, 68, 17, 36, 2\n370, 25, 55, 185, 59, 19, 216\n32, 21, 2, 36, 17, 68\n---\n48, 71, 1, 100, 21, 19\n71, 100, 48, 21, 19, 1\n35, 103, 65, 5, 19\n104, 409, 22, 1047, 151, 2, 44, 850\n13, 842, 47, 122, 477, 32, 413\n116, 430, 17, 70, 14\n25, 108, 17, 151, 5, 3, 150\n3, 24, 11, 88, 189, 23, 5\n36, 17, 32, 21, 2, 68\n17, 13, 213, 32, 57, 2, 6, 3, 29\n16, 90, 205, 82, 19, 11, 49\n244, 635, 36, 27, 1354, 49, 15, 1, 1\n430, 116, 14, 70, 17\n13, 68, 35, 2, 1\n44, 850, 22, 409, 151, 2, 1047, 104\n1741, 288, 804, 35, 122, 19, 8, 12\n403, 171, 71, 404, 8, 16, 16, 149\n48, 19, 21, 100, 1, 71\n16, 1617, 5810, 139, 52, 1217, 12, 451\n29, 13, 32, 3, 6, 2, 213, 57, 17\n13, 477, 842, 413, 32, 47, 122\n205, 90, 19, 11, 16, 49, 82\n107, 685, 5877, 1831, 242, 864, 35, 3431, 13\n12, 1617, 16, 139, 52, 5810, 451, 1217\n35, 2, 68, 13, 1\n36, 1354, 27, 635, 1, 1, 49, 244, 15\n1617, 52, 139, 12, 451, 1217, 16, 5810\n28, 13, 41, 3, 3\n1617, 52, 451, 1217, 139, 12, 5810, 16\n1, 13, 68, 2, 35\n635, 27, 15, 244, 1, 1, 36, 49, 1354\n35, 15, 39, 3, 113\n1354, 49, 1, 1, 244, 15, 27, 36, 635\n113, 35, 39, 15, 3\n113, 39, 35, 15, 3\n1, 1, 1354, 49, 27, 15, 36, 244, 635\n11, 3, 23, 24, 189, 88, 5\n370, 25, 185, 59, 216, 55, 19\n44, 850, 409, 1047, 151, 22, 2, 104\n685, 242, 13, 107, 864, 3431, 1831, 35, 5877\n178, 24, 2109, 341, 62, 11, 1024\n213, 29, 2, 57, 13, 6, 17, 32, 3\n71, 403, 171, 404, 16, 16, 149, 8\n10, 2129, 46, 129, 132, 523, 600, 7, 6\n13, 41, 3, 3, 28\n90, 16, 205, 19, 11, 82, 49\n27, 1, 1, 36, 15, 635, 244, 1354, 49\n15, 635, 244, 36, 49, 27, 1, 1, 1354\n19, 21, 48, 100, 71, 1\n1617, 5810, 52, 12, 16, 1217, 451, 139\n244, 27, 36, 1, 1, 49, 1354, 635, 15\n16, 52, 451, 139, 1617, 1217, 5810, 12\n2129, 6, 600, 129, 10, 7, 132, 46, 523\n35, 39, 113, 15, 3\n57, 17, 3, 32, 29, 213, 2, 13, 6\n51, 76, 35, 239, 4, 124, 25\n404, 403, 71, 8, 171, 16, 16, 149\n6, 50, 129, 20, 250, 34\n4, 239, 35, 51, 25, 124, 76\n11, 5, 88, 3, 23, 189, 24\n32, 21, 17, 36, 2, 68\n56, 56, 19, 42, 5\n25, 150, 5, 17, 108, 3, 151\n13, 1, 2, 35, 68\n1354, 635, 15, 244, 36, 27, 49, 1, 1\n35, 103, 5, 65, 19\n185, 25, 55, 59, 370, 216, 19\n239, 4, 124, 51, 35, 25, 76\n2129, 6, 600, 10, 129, 523, 7, 46, 132\n1, 68, 2, 13, 35\n42, 56, 56, 19, 5\n5, 17, 25, 3, 150, 108, 151\n15, 27, 635, 1354, 36, 1, 1, 49, 244\n19, 5, 103, 65, 35\n107, 1831, 685, 35, 3431, 242, 13, 864, 5877\n3, 3, 28, 13, 41\n22, 2, 850, 151, 44, 104, 409, 1047\n24, 5, 23, 88, 189, 3, 11\n16, 19, 205, 82, 90, 49, 11\n13, 28, 3, 3, 41\n150, 151, 3, 17, 25, 108, 5\n50, 20, 6, 250, 129, 34\n1551, 426, 305, 145, 6, 59, 1992, 14\n3, 189, 24, 5, 11, 23, 88\n216, 55, 59, 19, 370, 25, 185\n90, 19, 82, 16, 11, 205, 49\n239, 124, 25, 51, 76, 4, 35\n3431, 5877, 242, 685, 1831, 864, 107, 13, 35\n44, 151, 2, 22, 850, 104, 409, 1047\n70, 430, 14, 17, 116\n22, 2, 409, 44, 151, 850, 1047, 104\n129, 7, 10, 600, 6, 523, 2129, 46, 132\n32, 2, 17, 21, 36, 68\n35, 68, 13, 2, 1\n71, 403, 171, 8, 16, 16, 404, 149\n13, 842, 477, 47, 32, 122, 413\n44, 2, 409, 151, 22, 1047, 850, 104\n1, 1, 15, 635, 36, 244, 27, 49, 1354\n3, 6, 17, 213, 13, 57, 2, 32, 29\n12, 19, 1741, 122, 8, 804, 288, 35\n3, 88, 11, 5, 189, 24, 23\n113, 15, 35, 39, 3\n139, 16, 451, 5810, 12, 1617, 52, 1217\n600, 10, 132, 46, 6, 129, 2129, 523, 7\n3, 113, 39, 35, 15\n23, 11, 189, 88, 24, 5, 3\n47, 13, 842, 477, 32, 122, 413\n28, 3, 3, 41, 13\n205, 49, 82, 19, 90, 16, 11\n17, 116, 70, 430, 14\n5, 19, 42, 56, 56\n122, 842, 47, 413, 13, 32, 477\n2, 21, 36, 68, 32, 17\n16, 49, 205, 11, 19, 82, 90\n36, 17, 32, 21, 2, 68\n12, 52, 16, 1617, 451, 1217, 139, 5810\n3, 25, 17, 5, 151, 108, 150\n28, 41, 3, 3, 13\n19, 288, 1741, 8, 12, 122, 35, 804\n239, 51, 35, 4, 76, 124, 25\n55, 216, 185, 59, 19, 370, 25\n139, 451, 1617, 16, 5810, 52, 1217, 12\n1, 1, 244, 36, 1354, 635, 27, 49, 15\n5, 42, 56, 56, 19\n122, 13, 413, 477, 842, 32, 47\n35, 2, 13, 68, 1\n8, 403, 149, 71, 16, 16, 171, 404\n205, 16, 82, 90, 19, 49, 11\n2, 68, 36, 32, 17, 21\n49, 205, 90, 16, 19, 11, 82\n19, 56, 56, 5, 42\n1, 13, 2, 35, 68\n129, 6, 50, 250, 20, 34\n1, 13, 68, 35, 2\n151, 1047, 104, 409, 22, 2, 850, 44\n19, 100, 71, 21, 1, 48\n5, 65, 19, 103, 35\n113, 3, 15, 35, 39\n1, 13, 68, 2, 35\n3, 113, 35, 15, 39\n129, 46, 600, 523, 2129, 6, 7, 10, 132\n850, 1047, 44, 2, 104, 151, 22, 409\nThis line should be ignored because it's not valid\n189, 24, 5, 88, 23, 3, 11\n39, 15, 113, 3, 35\n685, 107, 13, 242, 5877, 3431, 1831, 35, 864\n17, 116, 430, 14, 70\n39, 3, 113, 15, 35\n3, 15, 39, 113, 35\n404, 149, 16, 16, 71, 8, 403, 171\n32, 122, 47, 413, 842, 13, 477\n6, 34, 129, 250, 50, 20\n2, 1047, 409, 44, 850, 151, 22, 104\n17, 116, 430, 14, 70\n32, 2, 68, 21, 17, 36\n13, 35, 2, 1, 68\n305, 1992, 1551, 14, 6, 426, 145, 59\n17, 2, 36, 32, 68, 21\n477, 842, 47, 13, 413, 122, 32\n5, 23, 11, 88, 3, 24, 189\n5, 3, 17, 150, 108, 25, 151\n52, 16, 12, 1617, 451, 5810, 1217, 139\n409, 22, 850, 1047, 2, 104, 44, 151\n44, 1047, 409, 104, 2, 850, 151, 22\n477, 413, 47, 32, 122, 13, 842\n5, 3, 11, 23, 24, 189, 88\n8, 19, 35, 1741, 12, 288, 122, 804\n68, 17, 36, 2, 21, 32\n1, 2, 35, 68, 13\n477, 413, 47, 32, 842, 122, 13\n6, 250, 50, 129, 34, 20\n5810, 139, 451, 16, 1617, 52, 1217, 12\n1, 68, 35, 13, 2\n47, 32, 13, 842, 122, 413, 477\n,\n5, 19, 42, 56, 56\n132, 6, 7, 10, 523, 46, 2129, 129, 600\n25, 150, 5, 108, 151, 3, 17\n23, 3, 88, 24, 11, 189, 5\n32, 29, 2, 17, 57, 3, 13, 6, 213\n250, 6, 129, 34, 50, 20\n16, 1617, 12, 139, 52, 5810, 1217, 451\n104, 409, 151, 22, 44, 1047, 2, 850\n17, 108, 151, 150, 5, 25, 3\n3, 113, 35, 15, 39\n50, 129, 20, 34, 250, 6\n15, 113, 39, 3, 35\n34, 129, 50, 250, 20, 6\n108, 150, 17, 151, 5, 3, 25\n239, 76, 25, 4, 124, 51, 35\n50 41 87 95\n16, 16, 404, 171, 71, 8, 149, 403\n104, 151, 1047, 409, 850, 2, 44, 22\n32, 47, 13, 122, 413, 842, 477\n15, 1354, 36, 635, 1, 1, 49, 27, 244\n68, 1, 35, 13, 2\n171, 403, 404, 8, 71, 149, 16, 16\n244, 1, 1, 15, 635, 36, 49, 1354, 27\n3431, 107, 1831, 685, 13, 5877, 35, 242, 864\n16, 16, 149, 403, 404, 171, 8, 71\n24, 88, 5, 23, 189, 11, 3\n41, 13, 3, 3, 28\n17, 3, 2, 6, 29, 57, 213, 13, 32\n8, 149, 71, 403, 171, 404, 16, 16\n15, 113, 35, 3, 39\n90, 82, 11, 205, 49, 16, 19\n403, 171, 71, 8, 404, 149, 16, 16\n21, 1, 19, 48, 71, 100\n23, 11, 5, 24, 3, 88, 189\n19, 42, 5, 56, 56\n5, 65, 103, 19, 35\n107, 35, 13, 864, 685, 1831, 5877, 3431, 242\n17, 21, 36, 2, 68, 32\n523, 7, 46, 2129, 129, 132, 6, 10, 600\n41, 13, 28, 3, 3\n2, 68, 35, 13, 1\n124, 51, 239, 25, 4, 76, 35\n11, 24, 3, 189, 23, 5, 88\n82, 49, 205, 11, 90, 19, 16\n42, 19, 5, 56, 56\n150, 25, 3, 5, 151, 108, 17\n56, 56, 19, 42, 5\n59, 19, 25, 185, 370, 216, 55\n11, 24, 2109, 1024, 62, 341, 178\n451, 1617, 12, 5810, 52, 16, 1217, 139\n56, 56, 42, 19, 5\n15, 39, 35, 3, 113\n19, 370, 185, 25, 216, 55, 59\n19, 100, 71, 48, 1, 21\n403, 149, 8, 404, 171, 16, 16, 71\n216, 59, 55, 370, 185, 19, 25\n6, 34, 20, 50, 250, 129\n25, 55, 19, 185, 59, 370, 216\n13, 28, 41, 3, 3\n41, 28, 13, 3, 3\n3, 3, 41, 28, 13\n17, 70, 430, 116, 14\n82, 49, 16, 11, 205, 90, 19\n35, 13, 1, 2, 68\n213, 13, 2, 57, 6, 32, 17, 29, 3\n185, 216, 370, 59, 19, 55, 25\n6, 2129, 10, 7, 129, 46, 600, 523, 132\n104, 850, 2, 409, 1047, 22, 44, 151\n32, 17, 213, 3, 2, 29, 57, 6, 13\n11, 16, 82, 90, 49, 19, 205\n189, 3, 11, 24, 23, 88, 5\n3, 3, 28, 13, 41\n28, 13, 3, 3, 41\n1, 1, 27, 15, 244, 635, 1354, 49, 36\n635, 15, 1354, 27, 1, 1, 49, 244, 36\n5, 103, 19, 35, 65\n44, 850, 104, 409, 151, 1047, 22, 2\n68, 35, 2, 1, 13\n185, 216, 370, 55, 19, 25, 59\n2, 21, 32, 68, 17, 36\n29, 2, 57, 213, 3, 6, 17, 32, 13\n305, 426, 1992, 145, 1551, 14, 6, 59\n29, 3, 17, 6, 2, 213, 32, 13, 57\n13, 5877, 3431, 242, 685, 35, 1831, 864, 107\n59, 14, 1551, 426, 6, 1992, 145, 305\n1551, 6, 426, 145, 14, 59, 305, 1992\n3, 23, 5, 24, 88, 189, 11\n1, 1, 1354, 635, 15, 36, 49, 244, 27\n11, 16, 49, 82, 19, 90, 205\n635, 49, 1, 1, 15, 1354, 244, 27, 36\n6, 129, 523, 2129, 46, 7, 10, 132, 600\n59, 19, 185, 216, 25, 370, 55\n107, 1831, 5877, 3431, 35, 864, 242, 685, 13\n635, 27, 36, 15, 1, 1, 49, 1354, 244\n5, 19, 56, 56, 42\n35, 288, 804, 19, 8, 122, 1741, 12\n57, 2, 29, 3, 17, 32, 213, 6, 13\n90, 49, 82, 11, 19, 205, 16\n36, 244, 49, 1354, 27, 635, 1, 1, 15\n477, 413, 13, 32, 47, 842, 122\n1047, 850, 44, 2, 151, 409, 22, 104\n1047, 151, 104, 22, 850, 2, 409, 44\n288, 12, 1741, 8, 122, 35, 19, 804\n71, 171, 403, 404, 149, 8, 16, 16\n41, 3, 3, 28, 13\n11, 19, 82, 205, 16, 49, 90\n21, 100, 19, 48, 71, 1\n19, 35, 5, 103, 65\n17, 3, 150, 5, 25, 151, 108\n41, 3, 3, 13, 28\n28, 3, 3, 41, 13\n42, 56, 56, 19, 5\n103, 35, 65, 5, 19\n14, 430, 17, 70, 116\n1831, 5877, 13, 3431, 107, 35, 864, 685, 242\n55, 216, 25, 370, 185, 19, 59\n19, 59, 55, 370, 216, 25, 185\n17, 151, 3, 108, 25, 5, 150\n1217, 1617, 139, 16, 5810, 52, 12, 451\n430, 70, 116, 17, 14\n189, 11, 88, 24, 3, 5, 23\n16, 139, 12, 1617, 5810, 1217, 451, 52\n1, 2, 35, 13, 68\n124, 51, 4, 239, 76, 35, 25\n11, 5, 3, 88, 23, 24, 189\n1, 71, 48, 100, 19, 21\n850, 151, 409, 1047, 44, 2, 104, 22\n35, 25, 51, 239, 124, 4, 76\n16, 16, 171, 403, 404, 8, 71, 149\n71, 16, 16, 404, 171, 403, 149, 8\n145, 14, 6, 1551, 1992, 305, 426, 59\n23, 11, 3, 5, 24, 189, 88\n";
// var input = "113, 35, 3, 39, 15\n13, 28, 3, 3, 41\nhola mundo\nh,2,3\n430, 70, 14, 116, 17\n51, 76, 35, 239, 124, 4, 25\n1, 1, 15, 36, 244, 27, 49, 635, 1354\n4, 51, 124, 239, 25, 35, 76\n51, 25, 76, 239, 4, 124, 35\n1617, 16, 52, 12, 139, 451, 1217, 5810\n171, 16, 16, 8, 71, 404, 149, 403\n145, 59, 426, 6, 305, 1992, 1551, 14\n13, 1, 68, 2, 35\n430, 116, 70, 17, 14\n116, 14, 70, 17, 430\n171, 403, 149, 404, 71, 8, 16, 16\n4, 35, 25, 239, 124, 51, 76\n216, 185, 59, 25, 370, 19, 55\n103, 35, 5, 65, 19\n250, 129, 50, 34, 6, 20\n11, 82, 16, 90, 19, 205, 49\n150, 25, 151, 17, 3, 5, 108\n49, 11, 90, 205, 82, 19, 16\n14, 17, 116, 430, 70\n57, 6, 17, 213, 13, 2, 3, 32, 29\n23, 11, 189, 24, 5, 88, 3\n864, 13, 3431, 685, 242, 5877, 1831, 35, 107\n11, 16, 49, 19, 205, 82, 90\n28, 41, 13, 3, 3\n250, 50, 34, 20, 129, 6\n403, 71, 404, 16, 16, 149, 8, 171\n51, 124, 76, 35, 239, 25, 4\n205, 19, 82, 49, 11, 16, 90\n250, 20, 34, 6, 50, 129\n22, 850, 151, 44, 409, 2, 104, 1047\n151, 2, 1047, 22, 409, 850, 44, 104\n129, 7, 132, 6, 46, 10, 600, 2129, 523\n19, 42, 5, 56, 56\n76, 239, 124, 51, 25, 35, 4\n28, 13, 3, 3, 41\n19, 5, 56, 56, 42\n122, 8, 12, 19, 804, 288, 35, 1741\n842, 413, 32, 477, 47, 13, 122\n19, 185, 59, 55, 25, 370, 216\n11, 24, 23, 88, 189, 5, 3\n150, 17, 3, 5, 151, 108, 25\n1, 21, 100, 71, 48, 19\n14, 17, 430, 116, 70\n49, 19, 82, 11, 90, 205, 16";
// var input = "1,2,3\n4,7,9,9\n2,3,1\n9,7,9,4\n5,34,8,1\n2,2,3,4\n,34,8,1\n2,3,3\n2,4,2,3\n,8,1,34\n1,5,8,34\n3,2,3\n2,1,3\n3,2,3\n3,3,2\na\nhola,23";

function main() {
    var input = getInput();
    if (input) {
        var util = new Utilities(input);
        var report = util.getReportInformation();

        showDupplicates(report.information);
        showInvalids(report.setsNotValid);
    } else {
        document.getElementById("requeriment_b").tBodies[0].innerHTML="";
        document.getElementById("requeriment_d").innerHTML = "";
        document.getElementById("div_requeriment_d").style.display = "none";
    }
    var time2 = new Date();
    console.log(time2.getTime() - time1.getTime());
}


function showDupplicates(report) {
    var mostDuplicate = "";
    var tbody = document.getElementById("requeriment_b").tBodies[0];
    tbody.innerHTML = "";
    Object.keys(report).forEach(function(set, i) {

        if (report[mostDuplicate] == undefined || report[mostDuplicate].d == undefined || (report[mostDuplicate].d && report[set].d && report[mostDuplicate].d.length < report[set].d.length)) {
            mostDuplicate = set;
        }

        var tr = document.createElement("tr");
        tr.id = set;
        var td1 = document.createElement("td")
        td1.innerHTML = set;
        var td2 = document.createElement("td")
        td2.innerHTML = (report[set].d && report[set].d.length || 0);
        var td3 = document.createElement("td")
        td3.innerHTML = (report[set].nd && report[set].nd.length || 0);

        tr.appendChild(td1);
        tr.appendChild(td2);
        tr.appendChild(td3);
        tbody.appendChild(tr);


        if (Object.keys(report).length - 1 == i) {
            document.getElementById("sSet").innerHTML = mostDuplicate;
            document.getElementById("sCount").innerHTML = report[mostDuplicate].d.length;
            document.getElementById(mostDuplicate).className = "mostDuplicate";
        }
    });

}

function showInvalids(invalids) {
    var ul = document.getElementById("requeriment_d");
    ul.innerHTML = "";
    for (var i = 0; i < invalids.length; i++) {
        var li = document.createElement("li");
        li.innerHTML = invalids[i];
        ul.appendChild(li);
    }
    
    document.getElementById("div_requeriment_d").style.display = invalids.length>0 ? "block":"none";
}

function getInput() {
    return document.getElementById("inputTextArea").value;
}

// main();
document.getElementById("btnGetReport").addEventListener("click", main);